<!DOCTYPE html>
<html lang="en" translate="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <link rel="icon" href="https://github.com/MerpatiQuu/Home/blob/main/WhatsApp%20Image%202024-12-17%20at%2021.35.48.jpeg?raw=true" type="image/x-icon" />
  <meta property="og:image" content="https://github.com/MerpatiQuu/Home/blob/main/WhatsApp%20Image%202024-12-17%20at%2021.35.48.jpeg?raw=true" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.9.1/font/bootstrap-icons.min.css" rel="stylesheet">
    <title>Admin - Toko Beddian</title>
   
</head>
<body>
  <style>/* Global Styles */
body {
    padding: 15px;
    font-family: Arial, sans-serif;
    background-color: #4CAF50; /* Light gray background */
}
html {
            -webkit-user-select: none; /* Nonaktifkan seleksi teks otomatis */
            -webkit-tap-highlight-color: transparent; /* Nonaktifkan highlight saat menekan layar */
        }
.round-icon-container {
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #007bff; /* Warna latar belakang */
    border-radius: 50%; /* Membuat kotak bulat */
    width: 50px; /* Ukuran kotak */
    height: 50px; /* Ukuran kotak */
    cursor: pointer; /* Tanda pointer saat diklik */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* Efek bayangan */
    position: absolute; /* Menempatkan di tengah halaman */
    top: 50%; /* Menempatkan di tengah secara vertikal */
    left: 50%; /* Menempatkan di tengah secara horizontal */
    transform: translate(-50%, -50%); /* Memindahkan dari posisi top dan left 50% */
transition: box-shadow 0.3s ease, transform 0.3s ease; /* Efek transisi untuk perubahan bayangan dan transformasi */
}

.round-icon-container:hover {
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3); /* Efek bayangan lebih dalam saat mouse hover untuk efek ngambang yang lebih nyata */
    transform: translate(-50%, -50%) translateY(-10px); /* Menaikkan ikon sedikit untuk efek ngambang */
}

.round-icon-container i {
    color: white; /* Sesuaikan warna ikon dengan header */
    font-size: 24px; /* Ukuran ikon */
    transition: color 0.3s ease; /* Efek transisi untuk perubahan warna */
}

.round-icon-container:hover i {
    color: yellow; /* Warna ikon saat mouse hover untuk efek menarik */
}
.curved-background {
    position: absolute; /* Posisi relatif terhadap tubuh */
    width: 100%;
    height: 100px;
    background-color: #FFFFFF; /* Warna putih */
    border-bottom-left-radius: 50% 40px;
    border-bottom-right-radius: 50% 40px;
    z-index: 0;
    top: 0; /* Posisikan di bagian atas halaman */
    display: flex;
    justify-content: center;
    align-items: center;
    left: 0; /* Membuat curve ini mencapai batas kiri halaman */

}



@keyframes fallDown {
    from {
        opacity: 0;
        transform: translateY(-100px); /* Mulai di atas halaman */
    }
    to {
        opacity: 1;
        transform: translateY(0); /* Jatuh ke posisi semula */
    }
}

.falling-image {
    width: 190px; /* Perkecil ukuran gambar */
    animation: fallDown 2s ease-out; /* Animasi jatuh selama 2 detik */
    display: block;
}

/* Main content */
    main {
      margin-left: 0;
      margin-top: 100px; /* Start below the header */
      padding: 20px;
    }


/* Table Styles */
.table {
    width: 100%; /* Lebar penuh */
    border-collapse: collapse;
    margin-bottom: 20px;
    overflow-x: auto; /* Allows horizontal scrolling if needed */
}

.table th,
.table td {
    padding: 8px 12px; /* Padding yang diperkecil untuk lebih kompak */
    border: 1px solid #dee2e6; /* Warna batas ringan */
    text-align: center; /* Center alignment for headers and cells */
    white-space: nowrap; /* Prevent text from wrapping by default */
    overflow: hidden; /* Prevent text from overflowing */
    text-overflow: ellipsis; /* Show '...' if text overflows */
}

.table th {
    background-color: #007bff; /* Warna latar belakang header */
    color: white; /* Warna teks header */
}

.table tr:nth-child(even) {
    background-color: #f2f2f2; /* Warna latar belakang untuk baris genap */
}

.table td {
    background-color: white; /* Warna latar belakang untuk isi data */
    word-wrap: break-word; /* Memastikan teks tidak terpotong */
    white-space: normal; /* Memungkinkan teks berpindah baris */
    max-width: 100%; /* Tabel otomatis menyesuaikan lebar sesuai konten */
    overflow: hidden; /* Menghentikan teks keluar dari sel */
    text-overflow: ellipsis; /* Menunjukkan '...' jika teks terpotong */
}


/* Button Styles */
.btn-custom {
    background-color: #007bff;
    color: white;
    padding: 8px 15px; /* Compact button padding */
    border: none;
    border-radius: 4px; /* Rounded corners */
    cursor: pointer;
    
}

.btn-custom:hover {
    background-color: #0056b3; /* Darker shade on hover */
}
.btn-group {
    display: flex; /* Menjadikan elemen dalam grup menjadi satu baris */
    gap: 5px; /* Jarak antara tombol */
}

.btn {
    display: flex; /* Memastikan tombol tetap rapi */
    align-items: center; /* Menjaga ikon dan teks tetap pada tengah */
    justify-content: center; /* Menjaga ikon tetap di tengah */
}

/* Modal Styles */
.modal-header {
    background-color: #007bff;
    color: white;
}

.modal-body {
    padding: 20px; /* Padding inside modal body */
}

.modal-footer {
    padding: 10px;
    border-top: 1px solid #dee2e6;
}

/* Form Styles */
.form-group {
    margin-bottom: 15px; /* Reduced margin for compactness */
}

.form-control {
    padding: 10px; /* Compact input field padding */
    border: 1px solid #ced4da; /* Light border for input */
    border-radius: 4px; /* Rounded corners for input */
}
.container {margin-top: 110px}
/* Responsive Styles */
@media (max-width: 768px) {
    body {
        padding: 10px; /* Less padding on smaller screens */
    }
    
    .table th,
    .table td {
        padding: 6px 10px; /* Further reduced padding on small screens */
    }

    .btn-custom {
        width: 100%; /* Full width buttons on small screens */
    }
}
.hidden-column {
    display: none; /* Menyembunyikan kolom */
}
.visually-hidden {
    visibility: hidden;
    height: 0;
    margin: 0;
    padding: 0;
}
 #dataTable th:first-child, #dataTable td:first-child {
        display: none;
    }.loader {
        position: fixed;
        top: 30%;
        left: 42%;
        transform: translate(-50%, -50%);
        z-index: 9999;
        display: none; /* Disembunyikan secara default */
        border: 16px solid #f3f3f3; /* Light grey */
        border-top: 16px solid #048023; /* Dark Green */
        border-radius: 50%;
        width: 80px; /* Ukuran lebih kecil */
        height: 80px; /* Ukuran lebih kecil */
        animation: spinloader 2s linear infinite;
    }
    
    .loader img {
        height: 80px; /* Ukuran lebih kecil */
        width: 80px; /* Ukuran lebih kecil */
        animation: spinlogo 2s linear infinite;
    }
    
    @keyframes spinloader {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    @keyframes spinlogo {
        0% { transform: rotate(360deg); }
        100% { transform: rotate(0deg); }
    }</style>
    <div class="curved-background">
        <img src="https://github.com/MerpatiQuu/Home/blob/main/WhatsApp_Image_2024-12-14_at_07.39.02_9892515b-removebg-preview.png?raw=true" alt="Toko Beddian" class="falling-image">
    </div>
    <div class="round-icon-container" onclick="window.location.href = 'index.html';">
        <i class="bi bi-house-door"></i>
    </div> 
    <div class="container">
        <table class="table table-bordered" id="dataTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Per-jam</th>
                    <th>Makan</th>
                    <th>Transport</th>
                    <th>Bulan</th>
                    <th>Tahun</th>
                    <th>Shift</th>
                    <th>Libur</th>
                    <th>-</th>
                </tr>
            </thead>
            <tbody>
                <!-- Data will be populated here -->
            </tbody>
        </table>
        <!-- Loader yang akan muncul di bawah tabel -->
    <div class="loader" style="display: none;">
        <img src="https://github.com/MerpatiQuu/Home/blob/main/WhatsApp_Image_2024-12-14_at_07.39.02_9892515b-removebg-preview.png?raw=true" />
    </div>
    </div>
<!-- Modal untuk Memperbarui Data Tagihan -->
<div class="modal fade" id="updateDataModal" tabindex="-1" role="dialog" aria-labelledby="updateDataModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-sm modal-dialog-scrollable" role="document" style="max-width: 200px;"> <!-- style max-width untuk mengatur lebar modal -->
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateDataModalLabel">Update</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form id="updateForm">
                    <input type="hidden" name="action" value="Update">
                    <div class="form-group">
                        <label for="updateID" class="form-control visually-hidden">ID</label>
                        <input type="text" class="form-control visually-hidden" id="updateID" name="ID" required>
                    </div>

                    <div class="form-group">
                        <label for="updatePer_jam">Per-jam</label>
                        <input type="text" class="form-control" id="updatePer_jam" name="Per_jam" required>
                    </div>
                    <div class="form-group">
                        <label for="updateUang_Makan">Uang Makan</label>
                        <input type="text" class="form-control" id="updateUang_Makan" name="Uang_Makan" required>
                    </div>
                    <div class="form-group">
                        <label for="updateTransport">Transport</label>
                        <input type="text" class="form-control" id="updateTransport" name="Transport" required>
                    </div>
                    <div class="form-group">
                        <label for="updateBulan">Bulan</label>
                        <input type="text" class="form-control" id="updateBulan" name="Bulan" required>
                    </div>
                    <div class="form-group">
                        <label for="updateTahun">Tahun</label>
                        <input type="text" class="form-control" id="updateTahun" name="Tahun" required>
                    </div>
                    <div class="form-group">
                        <label for="updateJam_Shift">Shift</label>
                        <input type="text" class="form-control" id="updateJam_Shift" name="Jam_Shift" required>
                    </div>
                    <div class="form-group">
                        <label for="updateLibur">Libur</label>
                        <input type="text" class="form-control" id="updateLibur" name="Libur" required>
                    </div>
                    <button type="button" class="btn btn-primary" id="updateSaveButton">Update</button>
                </form>
            </div>
        </div>
    </div>
</div>

      
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function() {
    // Fetch and display data immediately after the page is loaded
    fetchData();

    // Function to fetch and display data
    function fetchData() {
        $.getJSON('https://script.google.com/macros/s/AKfycbypLdv_GG9Egnug-O2uqXlNA3ljlAXfgL_s-VfWqO3xyPPZSKvF7WPLJFJ4oAj8uH4Dhw/exec?action=FetchData', function(data) {
            const tableBody = $('#dataTable tbody');
            tableBody.empty();
            data.forEach(function(row) {
                // Ensure the data is defined
                const id = row.ID !== undefined ? row.ID : '';
                const per_jam = row.Per_jam !== undefined ? row.Per_jam : '';
                const uang_makan = row.Uang_Makan !== undefined ? row.Uang_Makan : '';
                const transport = row.Transport !== undefined ? row.Transport : '';
                const bulan = row.Bulan !== undefined ? row.Bulan : '';
                const tahun = row.Tahun !== undefined ? row.Tahun : '';
                const jam_shift = row.Jam_Shift !== undefined ? row.Jam_Shift : '';
                const libur = row.Libur !== undefined ? row.Libur : '';
                // Append to table
                tableBody.append(`
                    <tr>
                        <td>${id}</td>
                        <td>${per_jam}</td>
                        <td>${uang_makan}</td>
                        <td>${transport}</td>
                        <td>${bulan}</td>
                        <td>${tahun}</td>
                        <td>${jam_shift}</td>
                        <td>${libur}</td>
                        <td>
                            <div class="btn-group">
                                <button class="btn btn-warning btn-sm edit w-10" data-id="${id}">
                                    <i class="fas fa-edit"></i> <!-- Ikon edit -->
                                </button>
                            </div>
                        </td>
                    </tr>
                `);
            });
        });
    }

    // Form submission for updating data
    $('#updateSaveButton').on('click', function(event) {
        event.preventDefault();
        $.post('https://script.google.com/macros/s/AKfycbypLdv_GG9Egnug-O2uqXlNA3ljlAXfgL_s-VfWqO3xyPPZSKvF7WPLJFJ4oAj8uH4Dhw/exec', $('#updateForm').serialize(), function(response) {
            alert(response.success || response.error);
            $('#updateDataModal').modal('hide');
            fetchData(); // Refresh the table data
        }, 'json');
    });

    $(document).on('click', '.edit', function() {
        const row = $(this).closest('tr');
        const id = row.find('td:eq(0)').text();
        const per_jam = row.find('td:eq(1)').text(); 
        const uang_makan = row.find('td:eq(2)').text(); 
        const transport = row.find('td:eq(3)').text();
        const bulan = row.find('td:eq(4)').text(); // Problematic column
        const tahun = row.find('td:eq(5)').text();
        const jam_shift = row.find('td:eq(6)').text();
        const libur = row.find('td:eq(7)').text();
        // Set the values in the update form modal
        $('#updateID').val(id);
        $('#updatePer_jam').val(per_jam);
        $('#updateUang_Makan').val(uang_makan);
        $('#updateTransport').val(transport);
        $('#updateBulan').val(bulan); // Ensure the ID matches the form field ID
        $('#updateTahun').val(tahun);
        $('#updateJam_Shift').val(jam_shift);
        $('#updateLibur').val(libur);
        $('#updateDataModal').modal('show');
    });
});


            // Delete button handler
            $(document).on('click', '.delete', function() {
                const id = $(this).data('id');
                if (confirm('Are you sure you want to delete this row?')) {
                    $.post('https://script.google.com/macros/s/AKfycbypLdv_GG9Egnug-O2uqXlNA3ljlAXfgL_s-VfWqO3xyPPZSKvF7WPLJFJ4oAj8uH4Dhw/exec', { action: 'Delete', id: id }, function(response) {
                        alert(response.success || response.error);
                        fetchData(); // Refresh the table data
                    }, 'json');
                }
            });
// Menampilkan loader saat data sedang dimuat
    function showLoader() {
        document.querySelector('.loader').style.display = 'block';
    }

    // Menghilangkan loader setelah data selesai dimuat
    function hideLoader() {
        document.querySelector('.loader').style.display = 'none';
    }

    // Contoh penggunaan: Menyembunyikan loader setelah 3 detik data dimuat
    document.addEventListener('DOMContentLoaded', function() {
        showLoader(); // Tampilkan loader ketika halaman dimuat
        setTimeout(hideLoader, 3000); // Sembunyikan loader setelah 3 detik
    });
    </script>
</body>
</html>
